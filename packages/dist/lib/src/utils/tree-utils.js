"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});function g(e){if(e.children&&e.children.length>0){let n=[];e.children.forEach(r=>{r=Object.assign({},r),delete r.__parent,n.push(r),g(r)}),e.children=n}}function d(e){e.children&&e.children.length>0&&e.children.forEach(n=>{n.__parent=e,d(n)})}function a(e,n,r,l){var f,t;let i=!1;if(r==="all"?(l&&(String(e.id)===String(n)||String(e.label)===String(n))||String(e.id).indexOf(n)>=0||String(e.label).indexOf(n)>=0)&&(i=!0):r==="id"?(l&&String(e.id)===String(n)||String(e.id).indexOf(n)>=0)&&(i=!0):r==="label"&&(l&&String(e.label)===String(n)||String(e.label).indexOf(n)>=0)&&(i=!0),i)return 0;if(e.children&&e.children.length>0)for(let h=0;h<e.children.length;h++){const c=a(e.children[h],n,r,l);h=h+c}return(!e.children||e.children.length<=0)&&!i?((t=(f=e.__parent)==null?void 0:f.children)==null||t.splice(e.__parent.children.indexOf(e),1),-1):0}const u={buildParentAndChildren:function(e,n){if(n){let r=[];for(let i=0;i<e.length;i++){const f=Object.assign({},e[i]);delete f.__parent,f.children=[],r.push(f)}for(let i=0;i<r.length;i++){const f=r[i];String(f.id);const t=String(f.__parentId);r.some(h=>{var c;if(String(h.id)===t)return h.children||(h.children=[]),(c=h.children)==null||c.push(f),f.__parent=h,!0})}let l=[];for(let i=0;i<r.length;i++){const f=r[i];f.__parent||l.push(f)}return l}else{let r=[];for(let l=0;l<e.length;l++){const i=Object.assign({},e[l]);delete i.__parent,i.children&&i.children.length>0&&g(i),r.push(i)}for(let l=0;l<r.length;l++){const i=r[l];i.__parent=null,i.children&&i.children.length>0&&d(i)}return r}},buildChildren:function(e){let n=[];for(let l=0;l<e.length;l++){const i=Object.assign({},e[l]);delete i.__parent,i.children=[],n.push(i)}for(let l=0;l<n.length;l++){const i=n[l];String(i.id);const f=String(i.__parentId);n.some(t=>{var h;if(String(t.id)===f)return t.children||(t.children=[]),(h=t.children)==null||h.push(i),i.__parent=t,!0})}let r=[];for(let l=0;l<n.length;l++){const i=n[l];i.__parent||r.push(i)}return r},searchIdAndLabel:function(e,n,r,l=!1){let i=this.buildParentAndChildren(e,r);if(!n||n.length<=0)return i;for(let f=0;f<i.length;f++){const t=i[f];let h=!1;l?h=String(t.id)===(n??"")||String(t.label)===(n??""):h=String(t.id).indexOf(n??"")>=0||String(t.label).indexOf(n??"")>=0,h||(a(t,n,"all",l),(!t.children||t.children.length<=0)&&(i.splice(i.indexOf(t),1),f--))}return i},searchId:function(e,n,r,l=!1){let i=this.buildParentAndChildren(e,r);if(!n||n.length<=0)return i;for(let f=0;f<i.length;f++){const t=i[f];let h=!1;l?h=String(t.id)===(n??""):h=String(t.id).indexOf(n??"")>=0,h||(a(t,n,"id",l),(!t.children||t.children.length<=0)&&(i.splice(i.indexOf(t),1),f--))}return i},searchLabel:function(e,n,r,l=!1){let i=this.buildParentAndChildren(e,r);if(!n||n.length<=0)return i;for(let f=0;f<i.length;f++){const t=i[f];let h=!1;l?h=String(t.label)===(n??""):h=String(t.label).indexOf(n??"")>=0,h||(a(t,n,"label",l),(!t.children||t.children.length<=0)&&(i.splice(i.indexOf(t),1),f--))}return i}};exports.TreeUtils=u;
