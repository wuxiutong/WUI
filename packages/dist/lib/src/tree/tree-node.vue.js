"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const o=require("vue");require("./style/tree-node.css");const S=require("./type.js"),T=["id","tabIndex","onKeydown"],_={key:0,class:"z-tree-node-anchor-arrow"},j={key:0,class:"z-tree-node-anchor-arrow-expander-minus",xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 16 16"},H=o.createElementVNode("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"0.5",d:"M 1.2595435,6.004727 H 10.740457",style:{"stroke-width":"0.509454","stroke-linecap":"square","stroke-dasharray":"none"}},null,-1),q=[H],W={key:1,class:"z-tree-node-anchor-arrow-expander-arrow-down",width:"12",height:"12",version:"1.1",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg","xmlns:svg":"http://www.w3.org/2000/svg"},$=o.createElementVNode("path",{fill:"currentColor",d:"m 0,2.3 5.999999,8 L 12,2.3 Z",id:"path1",style:{"stroke-width":"1.38564"}},null,-1),Z=[$],F={key:2,xmlns:"http://www.w3.org/2000/svg",class:"z-tree-node-anchor-arrow-expander-plus",viewBox:"-1 -1 14 14"},O=o.createElementVNode("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M 5.994727,1.254727 V 10.73564",id:"path1-8",style:{"stroke-width":"0.509454","stroke-linecap":"square","stroke-dasharray":"none"}},null,-1),U=o.createElementVNode("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M 1.2595435,6.004727 H 10.740457",id:"path1",style:{"stroke-width":"0.509454","stroke-linecap":"square","stroke-dasharray":"none"}},null,-1),G=[O,U],P={key:3,class:"z-tree-node-anchor-arrow-expander-arrow-right",width:"12",height:"12",version:"1.1",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg","xmlns:svg":"http://www.w3.org/2000/svg"},R=o.createElementVNode("path",{fill:"currentColor",d:"M 2.3,12 10.3,6.000001 2.3,0 Z",id:"path1",style:{"stroke-width":"1.38564"}},null,-1),X=[R],J=o.createElementVNode("svg",{width:"14px",height:"14px",viewBox:"0 -30 256 300"},[o.createElementVNode("path",{fill:"currentColor",d:"m210.83 85.17l-56-56A4 4 0 0 0 152 28H56a12 12 0 0 0-12 12v176a12 12 0 0 0 12 12h144a12 12 0 0 0 12-12V88a4 4 0 0 0-1.17-2.83M156 41.65L198.34 84H156ZM200 220H56a4 4 0 0 1-4-4V40a4 4 0 0 1 4-4h92v52a4 4 0 0 0 4 4h52v124a4 4 0 0 1-4 4"})],-1),Q=[J],Y={key:0,class:"z-tree-node-anchor-checkbox-icon-checked"},ee=o.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 3 12 12"},[o.createElementVNode("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.2919",d:"M 1.64595,9.2236174 4.5486491,12.354075 10.354047,5.64595",style:{"stroke-width":"1.5","stroke-dasharray":"none"}})],-1),oe=[ee],te={key:1,class:"z-tree-node-anchor-checkbox-icon-half-checked"},ne=o.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 3 12 12"},[o.createElementVNode("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.2919",d:"M 1.73638,8.993499 4.2115414,9.013614 10.263617,8.98638",style:{"stroke-width":"1.47276","stroke-linejoin":"round","stroke-dasharray":"none"},"sodipodi:nodetypes":"ccc"})],-1),re=[ne],de={key:2,class:"z-tree-node-anchor-checkbox-icon-unchecked"},le=o.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 0 0"},[o.createElementVNode("path",{fill:"currentColor"})],-1),ie=[le],se={class:"z-tree-node-anchor-content-default"},ae={key:0,class:"z-tree-node-anchor-content-id"},ce=["innerHTML"],he={class:"z-tree-node-anchor-content-label"},ke={key:0,class:"z-tree-node-child"},ue={name:"TreeNode"},m=o.defineComponent({...ue,props:{treeNode:{},checkedNodes:{default:()=>[]},expandKeys:{default:()=>[]},maxTabIndex:{},treeNodeList:{default:()=>[]},cascade:{type:Boolean,default:!0},showCheckbox:{type:Boolean,default:!1},transition:{default:"slide-fade"},showLine:{type:Boolean,default:!0},expandAll:{type:Boolean,default:!1},checkedAll:{type:Boolean},multipleCheck:{type:Boolean,default:!0},onlyLeafCheck:{type:Boolean,default:!0},enableDblclick:{type:Boolean,default:!1},enableWholeAnchorStatus:{type:Boolean,default:!1},enableCheckConfirm:{type:Boolean,default:!1},showId:{type:Boolean,default:!1},idSeparator:{default:""},hideLeafIcon:{type:Boolean,default:!1},hideExpander:{type:Boolean,default:!1},nodeContentClickAction:{default:S.TreeNodeContentClickActionEnum.NONE},senderElementId:{default:""},treeId:{default:""},focusedId:{}},emits:["update:checkedNode","update:expandNode","checkbox-click","node-click","node-dblclick"],setup(w,{emit:N}){const n=w;let c=null,i=!1;const d=N;o.watch(()=>n.treeNode,()=>{});function C(e){let t=e.disabled?"z-tree-node-anchor-disabled":"";return(n.enableWholeAnchorStatus||!n.multipleCheck)&&n.checkedNodes.some(r=>{if(e.id===r.id)return t+=" z-tree-node-anchor-selected",!0}),t}function y(e){let t="";return n.showLine&&(t+=" z-tree-node-line"),t}function E(e){if(e.children&&e.children.length>0&&n.onlyLeafCheck&&(!n.multipleCheck||!n.cascade))return"z-tree-node-anchor-checkbox-disabled"}function b(e,t){n.enableDblclick?(i=!1,c=setTimeout(()=>{i||h(e,t)},200)):h(e,t)}function h(e,t){d("node-click",e,t)}function B(e,t){d("node-click",e,t)}function v(e,t){n.enableDblclick&&(i=!0,clearTimeout(c),d("node-dblclick",e,t))}function g(e,t){d("node-dblclick",e,t)}function k(e){d("update:expandNode",e)}function I(e){d("update:expandNode",e)}function u(e,t){d("checkbox-click",e,t)}function z(e,t){d("checkbox-click",e,t)}function V(){if(n.senderElementId){const e=document.getElementById(n.senderElementId);e&&e.focus()}}function L(){p(n.treeNode.tabIndex??0)}function p(e){const t=document.getElementById(n.treeId+"__"+(e-1));t?t.focus():e>0&&p(e-1)}function x(){f(n.treeNode.tabIndex??0)}function f(e){const t=document.getElementById(n.treeId+"__"+(e+1));t?t.focus():e<=n.maxTabIndex&&e<=Number.MAX_SAFE_INTEGER&&f(e+1)}function K(){if(u(n.treeNode,new MouseEvent("click")),n.senderElementId&&!n.multipleCheck&&!n.treeNode.disabled&&(n.onlyLeafCheck&&(!n.treeNode.children||n.treeNode.children.length<=0)||!n.onlyLeafCheck)){const e=document.getElementById(n.senderElementId);e&&e.focus()}}function s(e){e.expanded||(e.expanded=!0),e.children&&e.children.length>0&&e.children.forEach(t=>{s(t)})}function a(e){e.expanded&&(e.expanded=!1),e.children&&e.children.length>0&&e.children.forEach(t=>{a(t)})}function M(e){e.ctrlKey&&e.shiftKey?n.treeNodeList.forEach(t=>{s(t)}):e.shiftKey?s(n.treeNode):n.treeNode.expanded=!0}function A(e){if(e.ctrlKey&&e.shiftKey){n.treeNodeList.forEach(l=>{a(l)});let t=n.treeNode;for(;t.__parent;)t=t.__parent;const r=document.getElementById(n.treeId+"__"+t.tabIndex);if(r)r.focus();else{const l=document.getElementById(n.treeId+"__1");l&&l.focus()}}else e.shiftKey?a(n.treeNode):n.treeNode.expanded=!1}return(e,t)=>(o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass(["z-tree-node",y(e.treeNode)])},[o.createElementVNode("div",{class:o.normalizeClass(["z-tree-node-anchor",C(e.treeNode)]),id:e.treeId+"__"+e.treeNode.tabIndex,tabIndex:e.treeNode.tabIndex,onKeydown:[o.withKeys(o.withModifiers(x,["prevent"]),["down"]),o.withKeys(o.withModifiers(L,["prevent"]),["up"]),o.withKeys(o.withModifiers(V,["prevent"]),["esc"]),o.withKeys(o.withModifiers(A,["prevent"]),["left"]),o.withKeys(o.withModifiers(M,["prevent"]),["right"]),o.withKeys(o.withModifiers(K,["prevent"]),["enter"])],onClick:t[3]||(t[3]=r=>b(e.treeNode,r)),onDblclick:t[4]||(t[4]=r=>v(e.treeNode,r))},[e.hideExpander?o.createCommentVNode("",!0):(o.openBlock(),o.createElementBlock("span",_,[e.treeNode.children&&e.treeNode.children.length?(o.openBlock(),o.createElementBlock("span",{key:0,class:"z-tree-node-anchor-arrow-expander",onClick:t[0]||(t[0]=o.withModifiers(r=>k(e.treeNode),["stop"]))},[e.treeNode.expanded&&e.showLine?(o.openBlock(),o.createElementBlock("svg",j,q)):o.createCommentVNode("",!0),e.treeNode.expanded&&!e.showLine?(o.openBlock(),o.createElementBlock("svg",W,Z)):o.createCommentVNode("",!0),e.showLine&&!e.treeNode.expanded?(o.openBlock(),o.createElementBlock("svg",F,G)):o.createCommentVNode("",!0),!e.showLine&&!e.treeNode.expanded?(o.openBlock(),o.createElementBlock("svg",P,X)):o.createCommentVNode("",!0)])):e.hideLeafIcon?o.createCommentVNode("",!0):(o.openBlock(),o.createElementBlock("span",{key:1,class:"z-tree-node-anchor-arrow-nochild",onClick:t[1]||(t[1]=o.withModifiers(r=>k(e.treeNode),["stop"]))},Q))])),o.withDirectives(o.createElementVNode("span",{class:o.normalizeClass(["z-tree-node-anchor-checkbox",E(e.treeNode)])},[o.createElementVNode("span",{class:"z-tree-node-anchor-checkbox-icon",onClick:t[2]||(t[2]=o.withModifiers(r=>u(e.treeNode,r),["stop"]))},[e.treeNode.checked===1?(o.openBlock(),o.createElementBlock("span",Y,oe)):e.treeNode.checked===2?(o.openBlock(),o.createElementBlock("span",te,re)):(o.openBlock(),o.createElementBlock("span",de,ie))])],2),[[o.vShow,e.multipleCheck||e.showCheckbox&&!e.multipleCheck]]),o.createElementVNode("div",{class:o.normalizeClass(["z-tree-node-anchor-content",e.hideLeafIcon&&(!e.treeNode.children||e.treeNode.children.length<=0)&&!e.showCheckbox&&!e.multipleCheck?"z-tree-node-anchor-content-noicon-nocheckbox":""])},[o.renderSlot(e.$slots,"default",{treeNode:e.treeNode},()=>[o.createElementVNode("div",se,[e.showId?(o.openBlock(),o.createElementBlock("span",ae,o.toDisplayString(e.treeNode.id),1)):o.createCommentVNode("",!0),e.showId?(o.openBlock(),o.createElementBlock("span",{key:1,class:"z-tree-node-anchor-content-separator",innerHTML:e.idSeparator},null,8,ce)):o.createCommentVNode("",!0),o.createElementVNode("span",he,o.toDisplayString(e.treeNode.label),1)])])],2)],42,T),o.createVNode(o.Transition,{name:e.transition,mode:"out-in"},{default:o.withCtx(()=>[e.treeNode.expanded?(o.openBlock(),o.createElementBlock("div",ke,[e.treeNode.expanded?(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:0},o.renderList(e.treeNode.children,(r,l)=>(o.openBlock(),o.createBlock(o.unref(m),{"sender-element-id":e.senderElementId,mode:"out-in","tree-node-list":e.treeNodeList,key:r.id?r.id:l,"tree-id":e.treeId,"max-tab-index":e.maxTabIndex,cascade:e.cascade,showCheckbox:e.showCheckbox,transition:e.transition,showLine:e.showLine,expandAll:e.expandAll,checkedAll:e.checkedAll,multipleCheck:e.multipleCheck,onlyLeafCheck:e.onlyLeafCheck,enableDblclick:e.enableDblclick,enableWholeAnchorStatus:e.enableWholeAnchorStatus,enableCheckConfirm:e.enableCheckConfirm,showId:e.showId,idSeparator:e.idSeparator,hideLeafIcon:e.hideLeafIcon,hideExpander:e.hideExpander,nodeContentClickAction:e.nodeContentClickAction,treeNode:r,"checked-nodes":e.checkedNodes,expandKeys:e.expandKeys,onCheckboxClick:z,"onUpdate:expandNode":I,onNodeClick:B,onNodeDblclick:g},{default:o.withCtx(D=>[o.renderSlot(e.$slots,"default",{treeNode:D.treeNode})]),_:2},1032,["sender-element-id","tree-node-list","tree-id","max-tab-index","cascade","showCheckbox","transition","showLine","expandAll","checkedAll","multipleCheck","onlyLeafCheck","enableDblclick","enableWholeAnchorStatus","enableCheckConfirm","showId","idSeparator","hideLeafIcon","hideExpander","nodeContentClickAction","treeNode","checked-nodes","expandKeys"]))),128)):o.createCommentVNode("",!0)])):o.createCommentVNode("",!0)]),_:3},8,["name"])],2))}});exports.default=m;
